// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id     Int    @default(autoincrement()) @id
  /// The user ID
  userID String @unique

  daily       Int      @default(0)
  xp          Int      @default(0)
  snowflakes  Int      @default(0)
  level       Int      @default(0)
  profilebg   String   @default("default")
  backgrounds String[]
  reps        Int      @default(0)
  repcooldown Int      @default(0)
  title       String   @default("No Title Set")
  lastUpvote  Int      @default(0)

  /// AFK
  afkTime   Int
  afkReason String

  /// Patreon
  paying   Boolean  @default(false)
  guildIDs String[]
  pledged  Int      @default(0)
  current  Int      @default(0)
  tokens   Int      @default(0)
}

model Member {
  id      Int    @default(autoincrement()) @id
  /// The user ID
  userID  String @unique
  /// The guild id
  guildID String
  /// The members xp
  xp      Int    @default(0)
  /// The members level
  level   Int    @default(0)
}

model Client {
  id                  Int      @default(autoincrement()) @id
  /// The blacklisted guild ids
  blacklistedGuildIDs String[]
  /// The blacklisted user ids
  blacklistedUserIDs  String[]
}

model Guild {
  id      Int    @default(autoincrement()) @id
  guildID String @unique

  /// Server logs
  joinLogs       Boolean @default(false)
  leaveLogs      Boolean @default(false)
  moderationLogs Boolean @default(false)
  channelsLogs   Boolean @default(false)
  messagesLogs   Boolean @default(false)
  automodLogs    Boolean @default(false)
  rolesLogs      Boolean @default(false)

  /// Starboard
  starboardChannelId String
  starboardRequired  Int    @default(3)

  /// Inhibitors
  disabledCommandsGroups String[]

  /// Welcome & Leave
  joinMessage  String @default("Welcome {MENTION} to {GUILD_NAME}, we hope you enjoy your stay!")
  leaveMessage String @default("It's sad to see you leave {USERNAME}, hope to see you again.")

  /// Misc
  leveluptype String @default("guild")
  volume      Int    @default(100)
  prefix      String @default("p!")
  language    String @default("en_US")

  /// Channels
  modlogsChannelID String
  joinChannelID    String
  leaveChannelID   String
  logsChannelID    String

  /// Toggles
  joinmsg                     Boolean @default(true)
  leavemsg                    Boolean @default(true)
  autoroles                   Boolean @default(true)
  perspective                 Boolean @default(false)
  customcmds                  Boolean @default(true)
  starboard                   Boolean @default(true)
  levelroles                  Boolean @default(true)
  modlogs                     Boolean @default(true)
  djmode                      Boolean @default(false)
  levelup                     Boolean @default(false)
  staffbypass                 Boolean @default(true)
  selfroles                   Boolean @default(true)
  invites                     Boolean @default(false)
  perspectiveToxicity         Boolean @default(false)
  perspectiveSeverToxicity    Boolean @default(false)
  perspectiveThreat           Boolean @default(true)
  perspectiveSpam             Boolean @default(true)
  perspectiveObscene          Boolean @default(false)
  perspectiveSexuallyExplicit Boolean @default(false)
  perspectiveProfanity        Boolean @default(false)

  /// Permissions
  adminIDs String[]
  modIDs   String[]
  staffIDs String[]
  djIDs    String[]

  /// Roles
  autoRoleIDs String[]
  selfRoleIDs String[]
  adminRole   String
  modRole     String
  staffRole   String
  djRole      String
  mutedRole   String
}

model Command {
  id      Int    @default(autoincrement()) @id
  /// The guild id where this custom command was created
  guildID String
  /// The name of the custom command
  name    String
  /// The text string for this custom command.
  content String
}
